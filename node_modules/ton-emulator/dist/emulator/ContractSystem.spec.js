"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ContractSystem_1 = require("./ContractSystem");
const testAddress_1 = require("../utils/testAddress");
const ton_core_1 = require("ton-core");
describe('ContractSystem', () => {
    it('should send messages', async () => {
        // Create contract system and a wallet
        let system = await ContractSystem_1.ContractSystem.create();
        let treasure = system.treasure('treasure');
        let unknownAddress = (0, testAddress_1.testAddress)('unknown');
        let tracker = system.track(treasure.address);
        let logs = system.log(treasure.address);
        // Send a message
        await treasure.send({
            to: unknownAddress,
            bounce: true,
            value: (0, ton_core_1.toNano)(1),
        });
        await system.run();
        // Send second time
        await treasure.send({
            to: unknownAddress,
            bounce: true,
            value: (0, ton_core_1.toNano)(1),
            body: (0, ton_core_1.beginCell)().storeUint(0, 32).storeStringTail('Hello world!').endCell()
        });
        await system.run();
        // Events
        expect(tracker.collect()).toMatchSnapshot();
        console.warn(logs.collect());
    });
});
